# Track Specification: lcd-check 対話型設定ウィザードの実装

## 1. 概要 (Overview)
ユーザーがLCDの実機表示を確認しながら対話形式で質問に答えることで、最適な `bgr` および `invert` 設定を自動的に特定し、必要に応じて設定ファイルを更新する機能を追加する。

## 2. 機能要件 (Functional Requirements)
- **ウィザードの起動**: `pi0disp lcd-check --wizard` オプションにより起動する。
- **テストパターンの表示**: ウィザード開始時に、現在のデフォルト設定（または指定された設定）でテストパターンをLCDに表示する。
- **対話型質問**: 以下の項目についてユーザーに質問する。
    - 左上の大きな四角形の色（赤、青、その他）
    - 背景色（黒/暗い、白/明るい）
    - テストパターン内の文字色（正しい、正しくない）
- **設定値の判定**: ユーザーの回答を内部の判定マトリックスと照合し、最適な `bgr` および `invert` の組み合わせを算出する。
- **設定ファイルの更新**: 
    - 判定された設定値を表示する。
    - 「pi0disp.toml を更新しますか？ [y/N]」と問いかけ、ユーザーが許可した場合にのみファイルを書き換える。

## 3. 非機能要件 (Non-Functional Requirements)
- **直感的なインターフェース**: 専門知識がなくても、色の見え方を答えるだけで設定が完了すること。
- **堅牢性**: 不正な入力（y/n 以外など）がなされた場合に適切に再試行を促すこと。
- **推測厳禁**: ユーザーの回答という「事実」に基づいて判定を行う。
- **デバッグ性の確保**: 判定プロセスや設定ファイル操作のログを適切に出力する。

## 4. 受け入れ条件 (Acceptance Criteria)
- `pi0disp lcd-check --wizard` を実行してウィザードが開始されること。
- 各質問に回答することで、正しい `bgr`, `invert` 設定が導き出されること。
- ユーザーの承認後に `pi0disp.toml` の値が正しく更新されること。
- 設定ファイルが存在しない場合でも、新しく作成するか適切なエラーメッセージを表示すること。
- `mise run lint` および `uv run pytest` がすべてパスすること。

## 5. 対象外 (Out of Scope)
- カメラを用いた完全自動判別。
- SPIバス速度やピンアサインの自動判定。
