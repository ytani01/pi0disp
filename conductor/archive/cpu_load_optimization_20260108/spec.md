# Track: roboface2.py および pigpiod のCPU負荷最適化

## 1. 概要
`samples/roboface2.py` の実行時における `pigpiod` のCPU負荷を削減し、`roboface2.py` 自体のパフォーマンスを全体的に向上させることを目的とする。

## 2. ゴール
*   `pigpiod` のCPU使用率の削減。
*   `roboface2.py` のパフォーマンスの全体的な向上（特にフレームレートの安定性、メモリ使用量の最適化、新しい描画アルゴリズム/データ構造の導入）。

## 3. アプローチ
以下の側面からCPU負荷削減とパフォーマンス向上を図る。
*   `pigpio` の操作回数を減らす (例: GPIOの書き込み頻度の最適化)。
*   `pigpiod` と `roboface2.py` 間の通信オーバーヘッドの削減。
*   `roboface2.py` 内部での画像処理や描画ロジックの最適化。

## 4. 機能要件
*   `roboface2.py` の既存機能（ランダムモード、対話モードでの表情表示、視線移動）が変更前と同等に動作すること。
*   CPU負荷削減の最適化が、視覚的なパフォーマンス低下を引き起こさないこと。

## 5. 非機能要件
*   `pigpiod` のCPU使用率が、現状と比較して○%（具体的な目標値は後述の「受け入れ基準」で定義）削減されること。
*   `roboface2.py` の実行時における平均フレームレートが安定し、かつ現状と同等以上であること。
*   `roboface2.py` のメモリ使用量が最適化され、現状と比較して低減されていること。
*   コードの可読性と保守性が維持されること。

## 6. 受け入れ基準
*   `pigpiod` のCPU使用率が、測定ツール（例: `htop` や `top`）を用いて、特定のシナリオ（例: ランダムモードで5分間実行）で、最適化前と比較して有意な改善（削減）が確認できること。
*   `roboface2.py` の平均フレームレートが、特定のシナリオで、最適化前と同等以上であること。
*   `roboface2.py` の実行に必要なメモリ量が、特定のシナリオで、最適化前と同等以下であること。
*   すべての単体テストおよび統合テストが成功すること。
*   リントツールおよび型チェックツール（`mise run lint` および `mypy`）でエラーが発生しないこと。

## 7. スコープ外
*   `pigpiod` 以外のシステムのCPU負荷最適化。
*   新しいハードウェアへの対応。
*   `roboface2.py` のUI/UXの大幅な変更。
