# Product Guide

## Initial Concept
- **Core Functionality**: Raspberry Pi上でST7789Vディスプレイを高速駆動するドライバ

### Overview
pi0dispは、Raspberry Pi、特にリソースに制約のあるRaspberry Pi Zero 2Wのようなモデルで、ST7789V搭載ディスプレイを効率的に駆動するために設計された、Python製の高速ディスプレイドライバライブラリです。本プロジェクトは、主にディスプレイの高速駆動に焦点を当てています。

### Key Features
*   **高速ディスプレイ駆動**: Raspberry Pi上でST7789Vディスプレイを効率的かつ高速に駆動します。
*   **超低負荷描画 (Dirty Rectangle)**: 自動差分更新機能により、変化のあった領域のみを SPI 送信します。これにより、表情アニメーション実行時の CPU 負荷を劇的に（最大 90% 以上）削減します。
*   **Pythonベース**: Pythonで記述されており、開発者が容易に利用・拡張できます。
*   **互換性**: Raspberry Pi Zero 2Wを含む様々なRaspberry Piモデルに対応しています。
*   **非同期表情アニメーションエンジン**: 専用サブスレッドとキューベースの制御により、メインスレッドをブロックせずに滑らかな視線移動と表情の変化を並行処理します。堅牢なエラーハンドリング（自動継続）と、高精度タイマー（perf_counter）による正確なタイミング制御、クリーンな終了シーケンスを備えています。
*   **インタラクティブ制御**: ヒストリー機能や複数表情の一括順次実行に対応した高度なCLIインタフェースを提供します。
*   **パフォーマンスベンチマーク**: 描画 FPS や CPU 負荷、メモリ使用量を計測し、最適化の効果を客観的に評価するツールを提供します。
*   **デバッグ・検証機能**: 指定間隔でのフレームキャプチャ機能を備え、描画の正確性を「事実」に基づいて検証可能です。

## 今後の展望 (Roadmap)
- [ ] グラフィックスライブラリ（Cairo, Skia 等）との連携強化（低解像度でのアンチエイリアスによる品質向上）
- [ ] 高度なレイヤー合成機能の追加
- [ ] Sprite および RegionOptimizer を活用した、CPU負荷を最小限に抑える「アプリケーション主導型差分更新」の導入
