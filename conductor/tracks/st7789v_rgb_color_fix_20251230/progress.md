# ST7789V RGB カラー修正進捗チェックリスト

## 提案されるステップ

- [ ] 1. カラー変換パイプラインの再評価:
    - [ ] `src/pi0disp/disp/st7789v.py` および `src/pi0disp/utils/performance_core.py`（特に `ColorConverter`）をより深く調査します。
    - [ ] PIL 画像（RGB）が RGB565 バイトに変換され、ST7789V コントローラーに送信される仕組みを理解します。
    - [ ] チャネルスワッピングが発生している、または導入されている場所を特定します。

- [ ] 2. ST7789V データシートの参照（利用可能またはアクセス可能な場合）:
    - [ ] RGB565 および BGR565 モードの期待されるデータ形式を確認します。
    - [ ] `MADCTL` レジスタの色順序（`BGR`）に関連するビットが、ディスプレイの解釈にどのように影響するかを検証します。

- [ ] 3. 修正されたカラーマッピングの実装:
    - [ ] 調査に基づいて、入力 RGB 値が ST7789V ディスプレイのカラー順序（RGB または BGR のいずれを期待し、565 形式をどのように処理するか）に正しくマッピングされるようにする堅牢なソリューションを実装します。
    - [ ] 必要に応じて、専用のカラー補正関数を作成するか、既存の `ColorConverter` を変更することを検討します。

- [ ] 4. ターゲットカラーテストの開発:
    - [ ] 純粋な赤、緑、青のブロック、および白と黒を表示する簡単なスクリプトを作成するか、`lcd_check.py` を変更して、チャネルマッピングの問題を簡単に特定できるようにします。

- [ ] 5. `lcd_check.py` および新規テストでの修正の検証:
    - [ ] `lcd_check.py` および新規ターゲットカラーテストを実行します。
    - [ ] すべての色が正しく表示されていることの視覚的確認（画像経由）を得ます。

- [ ] 6. リンティングとテスト:
    - [ ] 変更されたすべてのコードがリンティングと既存のテストに合格していることを確認します。

- [ ] 7. 変更のコミット:
    - [ ] 最終的に検証された変更を明確なメッセージと共にコミットします。
